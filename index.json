[{"content":"é…ç½®è¦æ±‚  2æ ¸4G çš„æœåŠ¡å™¨ Cent OS 7.8  ä¿®æ”¹ hostname # ä¿®æ”¹ hostname hostnamectl set-hostname kubernetes # æŸ¥çœ‹ä¿®æ”¹ç»“æœ hostnamectl status # è®¾ç½® hostname è§£æ echo \u0026#34;127.0.0.1 $(hostname)\u0026#34; \u0026gt;\u0026gt; /etc/hosts # æ­¤å¤„ hostname çš„è¾“å‡ºå°†ä¼šæ˜¯è¯¥æœºå™¨åœ¨ Kubernetes é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åå­— # ä¸èƒ½ä½¿ç”¨ localhost ä½œä¸ºèŠ‚ç‚¹çš„åå­— cat /etc/redhat-release hostname æ£€æŸ¥ç½‘ç»œ åœ¨æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤\n[root@k8s-master ~]# ip route show default via 10.1.2.2 dev ens33 proto static metric 100 10.1.2.0/24 dev ens33 proto kernel scope link src 10.1.2.100 metric 100 [root@k8s-master ~]# ip address 1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:2e:35:42 brd ff:ff:ff:ff:ff:ff inet 10.1.2.100/24 brd 10.1.2.255 scope global noprefixroute ens33 valid_lft forever preferred_lft forever inet6 fe80::a3e8:7936:50da:d341/64 scope link noprefixroute valid_lft forever preferred_lft forever  kubeletä½¿ç”¨çš„IPåœ°å€\n ip route show å‘½ä»¤ä¸­ï¼Œå¯ä»¥çŸ¥é“æœºå™¨çš„é»˜è®¤ç½‘å¡ï¼Œé€šå¸¸æ˜¯ eth0ï¼Œå¦‚ default via 10.1.2.2 dev eth0 ip address å‘½ä»¤ä¸­ï¼Œå¯æ˜¾ç¤ºé»˜è®¤ç½‘å¡çš„ IP åœ°å€ï¼ŒKubernetes å°†ä½¿ç”¨æ­¤ IP åœ°å€ä¸é›†ç¾¤å†…çš„å…¶ä»–èŠ‚ç‚¹é€šä¿¡ï¼Œå¦‚ 10.1.2.100 æ‰€æœ‰èŠ‚ç‚¹ä¸Š Kubernetes æ‰€ä½¿ç”¨çš„ IP åœ°å€å¿…é¡»å¯ä»¥äº’é€šï¼ˆæ— éœ€ NAT æ˜ å°„ã€æ— å®‰å…¨ç»„æˆ–é˜²ç«å¢™éš”ç¦»ï¼‰   å®‰è£… containerd / kubelet / kubeadm / kubectl ä½¿ç”¨ root èº«ä»½åœ¨æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼Œä»¥å®‰è£…è½¯ä»¶ï¼š\n containerd nfs-utils kubectl / kubeadm / kubelet  æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼Œç»“æœä¸å¿«é€Ÿå®‰è£…ç›¸åŒã€‚è¯·å°†è„šæœ¬ç¬¬79è¡Œï¼ˆå·²é«˜äº®ï¼‰çš„ ${1} æ›¿æ¢æˆæ‚¨éœ€è¦çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ 1.17.4\n docker hub é•œåƒè¯·æ ¹æ®è‡ªå·±ç½‘ç»œçš„æƒ…å†µä»»é€‰ä¸€ä¸ª\n ç¬¬å››è¡Œä¸ºè…¾è®¯äº‘ docker hub é•œåƒ ç¬¬å…­è¡Œä¸ºDaoCloud docker hub é•œåƒ ç¬¬å…«è¡Œä¸ºé˜¿é‡Œäº‘ docker hub é•œåƒ   # åœ¨ master èŠ‚ç‚¹å’Œ worker èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œ # æœ€åä¸€ä¸ªå‚æ•° 1.20.1 ç”¨äºæŒ‡å®š kubenetes ç‰ˆæœ¬ï¼Œæ”¯æŒæ‰€æœ‰ 1.20.x ç‰ˆæœ¬çš„å®‰è£… # è…¾è®¯äº‘ docker hub é•œåƒ # export REGISTRY_MIRROR=\u0026#34;https://mirror.ccs.tencentyun.com\u0026#34; # DaoCloud é•œåƒ # export REGISTRY_MIRROR=\u0026#34;http://f1361db2.m.daocloud.io\u0026#34; # é˜¿é‡Œäº‘ docker hub é•œåƒ export REGISTRY_MIRROR=https://registry.cn-hangzhou.aliyuncs.com åœ¨ master èŠ‚ç‚¹å’Œ worker èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œ\n#!/bin/bash  # åœ¨ master èŠ‚ç‚¹å’Œ worker èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œ # å®‰è£… containerd # å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ # https://kubernetes.io/docs/setup/production-environment/container-runtimes/#containerd cat \u0026lt;\u0026lt;EOF | sudo tee /etc/modules-load.d/containerd.conf overlay br_netfilter EOF sudo modprobe overlay sudo modprobe br_netfilter # Setup required sysctl params, these persist across reboots. cat \u0026lt;\u0026lt;EOF | sudo tee /etc/sysctl.d/99-kubernetes-cri.conf net.bridge.bridge-nf-call-iptables = 1 net.ipv4.ip_forward = 1 net.bridge.bridge-nf-call-ip6tables = 1 EOF # Apply sysctl params without reboot sysctl --system # å¸è½½æ—§ç‰ˆæœ¬ yum remove -y containerd.io # è®¾ç½® yum repository yum install -y yum-utils device-mapper-persistent-data lvm2 yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo # å®‰è£… containerd yum install -y containerd.io-1.4.3 mkdir -p /etc/containerd containerd config default \u0026gt; /etc/containerd/config.toml sed -i \u0026#34;s#k8s.gcr.io#registry.aliyuncs.com/k8sxio#g\u0026#34; /etc/containerd/config.toml sed -i \u0026#39;/containerd.runtimes.runc.options/a\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ SystemdCgroup = true\u0026#39; /etc/containerd/config.toml sed -i \u0026#34;s#https://registry-1.docker.io#${REGISTRY_MIRROR}#g\u0026#34; /etc/containerd/config.toml systemctl daemon-reload systemctl enable containerd systemctl restart containerd # å®‰è£… nfs-utils # å¿…é¡»å…ˆå®‰è£… nfs-utils æ‰èƒ½æŒ‚è½½ nfs ç½‘ç»œå­˜å‚¨ yum install -y nfs-utils yum install -y wget # å…³é—­ é˜²ç«å¢™ systemctl stop firewalld systemctl disable firewalld # å…³é—­ SeLinux setenforce 0 sed -i \u0026#34;s/SELINUX=enforcing/SELINUX=disabled/g\u0026#34; /etc/selinux/config # å…³é—­ swap swapoff -a yes | cp /etc/fstab /etc/fstab_bak cat /etc/fstab_bak |grep -v swap \u0026gt; /etc/fstab # é…ç½®K8Sçš„yumæº cat \u0026lt;\u0026lt;EOF \u0026gt; /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=0 repo_gpgcheck=0 gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF # å¸è½½æ—§ç‰ˆæœ¬ yum remove -y kubelet kubeadm kubectl # å®‰è£…kubeletã€kubeadmã€kubectl # å°† ${1} æ›¿æ¢ä¸º kubernetes ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ 1.20.1 yum install -y kubelet-${1} kubeadm-${1} kubectl-${1} crictl config runtime-endpoint /run/containerd/containerd.sock # é‡å¯ dockerï¼Œå¹¶å¯åŠ¨ kubelet systemctl daemon-reload systemctl enable kubelet \u0026amp;\u0026amp; systemctl start kubelet containerd --version kubelet --version åˆå§‹åŒ– master èŠ‚ç‚¹ # åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ # æ›¿æ¢ x.x.x.x ä¸º master èŠ‚ç‚¹çš„å†…ç½‘IP # export å‘½ä»¤åªåœ¨å½“å‰ shell ä¼šè¯ä¸­æœ‰æ•ˆï¼Œå¼€å¯æ–°çš„ shell çª—å£åï¼Œå¦‚æœè¦ç»§ç»­å®‰è£…è¿‡ç¨‹ï¼Œè¯·é‡æ–°æ‰§è¡Œæ­¤å¤„çš„ export å‘½ä»¤ export MASTER_IP=x.x.x.x # æ›¿æ¢ apiserver.demo ä¸º æ‚¨æƒ³è¦çš„ dnsName export APISERVER_NAME=apiserver.demo # Kubernetes å®¹å™¨ç»„æ‰€åœ¨çš„ç½‘æ®µï¼Œè¯¥ç½‘æ®µå®‰è£…å®Œæˆåï¼Œç”± kubernetes åˆ›å»ºï¼Œäº‹å…ˆå¹¶ä¸å­˜åœ¨äºæ‚¨çš„ç‰©ç†ç½‘ç»œä¸­ export POD_SUBNET=10.100.0.1/16 echo \u0026#34;${MASTER_IP}${APISERVER_NAME}\u0026#34; \u0026gt;\u0026gt; /etc/hosts #!/bin/bash  # åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ # è„šæœ¬å‡ºé”™æ—¶ç»ˆæ­¢æ‰§è¡Œ set -e if [ ${#POD_SUBNET} -eq 0 ] || [ ${#APISERVER_NAME} -eq 0 ]; then echo -e \u0026#34;\\033[31;1mè¯·ç¡®ä¿æ‚¨å·²ç»è®¾ç½®äº†ç¯å¢ƒå˜é‡ POD_SUBNET å’Œ APISERVER_NAME \\033[0m\u0026#34; echo å½“å‰POD_SUBNET=$POD_SUBNET echo å½“å‰APISERVER_NAME=$APISERVER_NAME exit 1 fi # æŸ¥çœ‹å®Œæ•´é…ç½®é€‰é¡¹ https://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta2 rm -f ./kubeadm-config.yaml cat \u0026lt;\u0026lt;EOF \u0026gt; ./kubeadm-config.yaml --- apiVersion: kubeadm.k8s.io/v1beta2 kind: ClusterConfiguration kubernetesVersion: v${1} imageRepository: registry.aliyuncs.com/k8sxio controlPlaneEndpoint: \u0026#34;${APISERVER_NAME}:6443\u0026#34; networking: serviceSubnet: \u0026#34;10.96.0.0/16\u0026#34; podSubnet: \u0026#34;${POD_SUBNET}\u0026#34; dnsDomain: \u0026#34;cluster.local\u0026#34; --- apiVersion: kubelet.config.k8s.io/v1beta1 kind: KubeletConfiguration cgroupDriver: systemd EOF # kubeadm init # æ ¹æ®æ‚¨æœåŠ¡å™¨ç½‘é€Ÿçš„æƒ…å†µï¼Œæ‚¨éœ€è¦ç­‰å€™ 3 - 10 åˆ†é’Ÿ echo \u0026#34;\u0026#34; echo \u0026#34;æŠ“å–é•œåƒï¼Œè¯·ç¨å€™...\u0026#34; kubeadm config images pull --config=kubeadm-config.yaml echo \u0026#34;\u0026#34; echo \u0026#34;åˆå§‹åŒ– Master èŠ‚ç‚¹\u0026#34; kubeadm init --config=kubeadm-config.yaml --upload-certs # é…ç½® kubectl rm -rf /root/.kube/ mkdir /root/.kube/ cp -i /etc/kubernetes/admin.conf /root/.kube/config # å®‰è£… calico ç½‘ç»œæ’ä»¶ # å‚è€ƒæ–‡æ¡£ https://docs.projectcalico.org/v3.13/getting-started/kubernetes/self-managed-onprem/onpremises echo \u0026#34;\u0026#34; echo \u0026#34;å®‰è£…calico-3.17.1\u0026#34; rm -f calico-3.17.1.yaml kubectl create -f https://kuboard.cn/install-script/v1.20.x/calico-operator.yaml wget https://kuboard.cn/install-script/v1.20.x/calico-custom-resources.yaml sed -i \u0026#34;s#192.168.0.0/16#${POD_SUBNET}#\u0026#34; calico-custom-resources.yaml kubectl create -f calico-custom-resources.yaml æ£€æŸ¥ master åˆå§‹åŒ–ç»“æœ\n# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ # æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç­‰å¾… 3-10 åˆ†é’Ÿï¼Œç›´åˆ°æ‰€æœ‰çš„å®¹å™¨ç»„å¤„äº Running çŠ¶æ€ watch kubectl get pod -n kube-system -o wide # æŸ¥çœ‹ master èŠ‚ç‚¹åˆå§‹åŒ–ç»“æœ kubectl get nodes -o wide åˆå§‹åŒ– workerèŠ‚ç‚¹ è·å¾— joinå‘½ä»¤å‚æ•° åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ\nkubeadm token create --print-join-command å¯è·å–kubeadm join å‘½ä»¤åŠå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º\n# kubeadm token create å‘½ä»¤çš„è¾“å‡º kubeadm join apiserver.demo:6443 --token mpfjma.4vjjg8flqihor4vt --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303 åˆå§‹åŒ–worker é’ˆå¯¹æ‰€æœ‰çš„ worker èŠ‚ç‚¹æ‰§è¡Œ\n# åªåœ¨ worker èŠ‚ç‚¹æ‰§è¡Œ # æ›¿æ¢ x.x.x.x ä¸º master èŠ‚ç‚¹çš„å†…ç½‘ IP export MASTER_IP=x.x.x.x # æ›¿æ¢ apiserver.demo ä¸ºåˆå§‹åŒ– master èŠ‚ç‚¹æ—¶æ‰€ä½¿ç”¨çš„ APISERVER_NAME export APISERVER_NAME=apiserver.demo echo \u0026#34;${MASTER_IP}${APISERVER_NAME}\u0026#34; \u0026gt;\u0026gt; /etc/hosts # æ›¿æ¢ä¸º master èŠ‚ç‚¹ä¸Š kubeadm token create å‘½ä»¤çš„è¾“å‡º kubeadm join apiserver.demo:6443 --token mpfjma.4vjjg8flqihor4vt --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303 æ£€æŸ¥åˆå§‹åŒ–ç»“æœ åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ\nkubectl get nodes -o wide è¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š\n[root@k8s-master ~]# kubectl get nodes NAME STATUS ROLES AGE VERSION k8s-master Ready master 3m46s v1.17.4 k8s-node Ready \u0026lt;none\u0026gt; 2m20s v1.17.4 ","permalink":"https://blog.bitqiu.cc/posts/use-kubeadm-install-kubernetes/","summary":"","title":"ä½¿ç”¨ kubeadm å®‰è£… kubernetes"},{"content":"é…ç½®æœåŠ¡ æ·»åŠ  Service\ncurl -i -X POST \\  --url http://localhost:8001/services/ \\  --data \u0026#39;name=api-gateway-sv\u0026#39; \\  --data \u0026#39;url=https://blog.bitqiu.cc\u0026#39; ä¸ºæœåŠ¡æ·»åŠ è·¯ç”±\ncurl -i -X POST \\  --url http://localhost:8001/services/api-gateway-sv/routes \\  --data \u0026#39;hosts[]=api.bitqiu.cc\u0026#39; é€šè¿‡Kongè½¬å‘æ‚¨çš„è¯·æ±‚\ncurl -i -X GET \\  --url http://localhost:8000/ \\  --header \u0026#39;Host: api.bitqiu.cc\u0026#39; é…ç½® JWT service å¼€å¯ jwt æ’ä»¶\n# æŸ¥çœ‹æ’ä»¶åˆ—è¡¨ curl -i -X GET \\ \t--url http://localhost:8000/ # å¼€å¯ jwt æ’ä»¶ curl -i -X POST \\ \t--url http://localhost:8001/services/api-gateway-sv/plugins \\ \t--data \u0026#39;name=jwt\u0026#39; åˆ›å»º consumer\ncurl -i -X POST \\ \t--url http://localhost:8000/consumers \\ \t--data \u0026#39;username=bitqiu\u0026#39; åˆ›å»º jwt å‡­è¯\n å¯ä»¥æŒ‡å®šç®—æ³•algorithmï¼Œissç­¾å‘è€…keyï¼Œå¯†é’¥secretï¼Œä¹Ÿå¯ä»¥çœç•¥ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆã€‚\n curl -i -X POST \\ \t--url http://localhost:8000/consumers/bitqiu/jwt \\ \t--data \u0026#39;algorithm=HS256\u0026#39; \\ \t--data \u0026#39;key=bitqiu_key\u0026#39; \\ \t--data \u0026#39;secret=uFLMFeKPPL525ppKrqmUiT2rlvkpLc9u\u0026#39; # æŸ¥çœ‹ jwt å‡­è¯ curl -i -X GET \\ \t--url http://localhost:8000/consumers/bitqiu/jwt # response { \u0026#34;rsa_public_key\u0026#34;: null, \u0026#34;created_at\u0026#34;: 1553681782, \u0026#34;consumer\u0026#34;: { \u0026#34;id\u0026#34;: \u0026#34;2e34d380-ec48-4a0d-926f-6dd8696a7eca\u0026#34; }, \u0026#34;id\u0026#34;: \u0026#34;61ee520c-3387-42f0-8e5f-02e0dc34d3d4\u0026#34;, \u0026#34;algorithm\u0026#34;: \u0026#34;HS256\u0026#34;, \u0026#34;secret\u0026#34;: \u0026#34;uFLMFeKPPL525ppKrqmUiT2rlvkpLc9u\u0026#34;, \u0026#34;key\u0026#34;: \u0026#34;7Xc3L8TdFpU6kgPEeR4iqMAstqLewJSS\u0026#34; } jwt ä¸‹å‘ ä¸šåŠ¡æœåŠ¡å™¨æ ¹æ® kong ç”Ÿæˆçš„ jwt å‡­è¯ä¸­çš„ algorithmã€keyï¼ˆissï¼‰ã€secretè¿›è¡Œ token çš„æ¼”ç®—å’Œä¸‹å‘ã€‚è¯·æ±‚é‰´æƒæ¥å£éœ€æºå¸¦  Authorization: Bearer jwt è¿›è¡Œè¯·æ±‚ã€‚æµ‹è¯•çš„è¯å¯ä»¥ç”¨ https://jwt.io ç”Ÿæˆï¼š\ncurl -i -X GET \\  --url http://localhost:8000/ \\  --header \u0026#39;Host: api.bitqiu.cc\u0026#39; --header \u0026#39;Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJkb3dudG93bl9rZXkiLCJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.nDvZa6Nu9cLxO36jnXsHwYIxrNLrDomJgvKJ5gihn4k\u0026#39; ","permalink":"https://blog.bitqiu.cc/posts/kong-jwt/","summary":"","title":"Kong åŸºæœ¬ç”¨æ³• + JWT"},{"content":"æœ‰æ²¡æœ‰å‘ç°æœ‰æ—¶å€™ä½ ä¼šæœ‰ä¾èµ–å…³ç³»æŸ¥è¯¢çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šè¯„è®ºå¤§äº5çš„æ‰€æœ‰æ–‡ç« ï¼Œé‚£ä¹ˆè¯„è®ºæ˜¯æ–‡ç« çš„å…³ç³»ï¼Œæ‰€ä»¥è¿™ç§æˆ‘ä»¬ç§°ä¸ºä¾èµ–å…³ç³»æŸ¥è¯¢ï¼Œ ä¸‹é¢ä¸¾ä¾‹ä¸€ä¸ªï¼š\næŸ¥å‡ºæ‰€æœ‰åŒ…å«äº†[laravel]è¿™ä¸ªæ ‡ç­¾çš„æ‰€æœ‰æ–‡ç«  \u0026lt;?php // Post model class Post extends Eloquent { public function tags() { return $this-\u0026gt;belongsToMany(\u0026#39;Tag\u0026#39;); } } // Tag model class Tag extends Eloquent() { public function posts() { return $this-\u0026gt;belongsToMany(\u0026#39;Post\u0026#39;); } } // æŸ¥è¯¢è‡ªä¸Šå‘¨å‘å¸ƒä»¥æ¥åŒ…å«äº† `laravel` æ ‡ç­¾çš„æ‰€æœ‰æ–‡ç«  $posts = Post::whereHas(\u0026#39;tags\u0026#39;, function($query) { $query-\u0026gt;where(\u0026#39;name\u0026#39;, \u0026#39;=\u0026#39;, \u0026#39;laravel\u0026#39;); })-\u0026gt;where(\u0026#39;published_at\u0026#39;, \u0026#39; \u0026gt;= \u0026#39;, Carbon\\Carbon::now()-\u0026gt;subWeek())-\u0026gt;get(); ","permalink":"https://blog.bitqiu.cc/posts/using-dependency-queries/","summary":"","title":"ä½¿ç”¨ä¾èµ–å…³ç³»æŸ¥è¯¢"},{"content":"è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ æˆ‘ä»¬åœ¨ç”¨ç€ 4.2ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´ä½œè€…å‘å¸ƒäº† 5.0ï¼Œé¡¹ç›®å¯èƒ½è¿˜æ²¡å¼€å‘å®Œï¼Œç„¶åä½ åˆåƒæˆ‘ä¸€æ ·æ˜¯ä¸€ä¸ªä¸å‡çº§ä¸èˆ’æœæ–¯åŸºï¼Œé‚£ä¹ˆç”¨å‡åˆ°æœ€æ–°ç‰ˆæ˜¯ä½ æ¥ä¸‹æ¥è¦å¿™ç¢Œçš„äº‹æƒ…ã€‚å› ä¸ºä½ ä¸çŸ¥é“ 4.2 ~ 5.0 å˜åŒ–äº†å¤šå°‘ã€‚æ‰€ä»¥ä½ ä¸å¯èƒ½æ‰‹åŠ¨ä¸€ä¸ªä¸ªåŠ ä¸Šæˆ–è€…åˆ é™¤ã€ä¿®æ”¹ã€‚æœ‰çš„äººå¯èƒ½æ˜¯å¤‡ä»½ï¼Œç„¶åç”¨æ–°ç‰ˆå»ºç«‹ä¸€ä¸ªé¡¹ç›®ï¼šcomposer create-project laravel/laravel ï¼Œç„¶åæŠŠåŸæ¥è‡ªå·±çš„ä»£ç è€ƒè¿‡æ¥ï¼Œç„¶è€Œï¼Œå˜åŒ–ä¸ä¸€å®šåªæ˜¯æ–‡ä»¶æ–°å¢æˆ–è€…åˆ é™¤å•Šï¼Œå¯èƒ½æ˜¯åŸæ¥æ–‡ä»¶é‡Œæ”¹äº†ä¸€è¡Œï¼Œä½ å´æ²¡æ³•çŸ¥é“ã€‚æ‰€ä»¥è¿™å°±å¤´ç–¼äº†ã€‚é‚£ä¹ˆä¸‹é¢æˆ‘å°±åˆ†äº«ä¸€ä¸ªè¶…ç®€å•çš„åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\né¦–å…ˆæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ gitï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰å®ƒçš„è¯ï¼Œèµ·ç ä½ è¿™æ—¶å€™åº”è¯¥å»è¡¥è¡¥åŸºæœ¬å‘½ä»¤äº†ã€‚\nè¿™é‡Œå‡è®¾æˆ‘ä»¬çš„é¡¹ç›®å«åš blog, ç„¶åæˆ‘ä»¬ç¬¬ä¸€æ­¥è¦åšçš„äº‹æƒ…æ˜¯æ·»åŠ å®˜æ–¹gitæº:\ncd blog # åˆ‡åˆ°é¡¹ç›®æ ¹ç›®å½• git remote add laravel https://github.com/laravel/laravel # æ·»åŠ ä¸€ä¸ªæº è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼š\nå› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®åŸºæœ¬éƒ½å·²ç»æœ‰ä¸€ä¸ªæºoriginï¼Œå°±æ˜¯æˆ‘ä»¬é¡¹ç›®ç”¨äºä¸Šä¼ åˆ°å…¬å¸ gitlab æˆ–è€… bitbucket è¿™æ ·çš„ç½‘ç«™ç”¨äºé¡¹ç›®ä»£ç ç®¡ç†çš„åœ°æ–¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç ´åå®ƒã€‚ç„¶åæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªå«åš laravelï¼Œè¿™æ ·å°±ä¼šæœ‰ä¸¤ä¸ªæºäº†ï¼Œæ„å‘³ç€æˆ‘ä»¬å°±å¯ä»¥ä»ä¸¤ä¸ªæºåŒæ­¥ä»£ç ã€‚\næ‹‰å– Larvel çš„æ–°ç‰ˆä»£ç  æ‹‰å–æŒ‡å®šçš„ Laravel åˆ†æ”¯  æ³¨æ„ï¼šåœ¨æˆ‘ä»¬æ‹‰å– Laravel æºçš„ä»£ç å‰ï¼Œè¯·ç¡®è®¤ä½ çš„ä¿®æ”¹éƒ½å·²ç»ä¿å­˜å¹¶ commitã€‚\n git pull laravel master è¿™é‡Œæˆ‘ä»¬ä» laravel çš„æºæ‹‰å– master åˆ†æ”¯ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‹‰å–å…¶å®ƒåˆ†æ”¯çš„ä»£ç ã€‚\nåˆå¹¶å†²çª æ‹‰å–å®Œä»£ç ï¼Œè¿™æ—¶å€™é€šå¸¸æ˜¯ä¼šå†²çªçš„ï¼Œå› ä¸ºä½ çš„ä»£ç ä¸å®˜æ–¹çš„ä»£ç ä¸ä¸€æ ·äº†ï¼Œå†²çªéƒ¨åˆ†å°±æ˜¯ä¸ç›¸åŒçš„åœ°æ–¹ï¼Œé‚£ä¹ˆä½ æ ¹æ®åˆå¹¶ç»“æœæ‰¾åˆ°CONFLICT (content): Merge conflict in xxxx.xxx éƒ¨åˆ†çš„æ–‡ä»¶æ‰“å¼€ï¼Œæ‰¾åˆ°å†²çªçš„åœ°æ–¹åˆå¹¶å°±å¥½äº†ã€‚\nè§£å†³å®Œå†²çªä½ çš„ä»£ç ç»“æ„å°±ä¸å®˜æ–¹ä¸€è‡´äº†ï¼Œè€Œä¸”è¿™ç§åˆå¹¶æ–¹å¼ä¸ä¼šè®©ä½ è½ä¸‹ä»»ä½•ä¸€ä¸ªä¸åŒçš„åœ°æ–¹ã€‚\nå½“ç„¶ä»¥ä¸Šçš„æ–¹æ³•é€‚ç”¨äºä»»ä½• git ç®¡ç†çš„é¡¹ç›®ã€‚æ¯”å¦‚å·¥ä½œä¸­ï¼Œä½  fork äº†ä¸»é¡¹ç›®ï¼Œè¦ç»å¸¸åŒæ­¥ä¸»é¡¹ç›®çš„æ›´æ–°æ—¶å°±ç”¨è¿™ä¸ªæ–¹æ³•æœ€ç®€å•äº†ã€‚\n","permalink":"https://blog.bitqiu.cc/posts/sync-your-laravel-project/","summary":"","title":"è®©ä½ çš„ Laravel åº”ç”¨ä¸å®˜æ–¹ä¿æŒåŒæ­¥"},{"content":"PHPCS å®‰è£… æœ‰ä»¥ä¸‹æ–¹å¼å®‰è£… PHPCS:\nä½¿ç”¨ composer: composer global require \u0026quot;squizlabs/php_codesniffer=*\u0026quot;  æ³¨æ„ï¼Œä½ å¯èƒ½éœ€è¦å°† ~/.composer/vendor/bin/ æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥å‘½ä»¤æ‰¾ä¸åˆ°ã€‚\n ä½¿ç”¨ PEAR: pear install PHP_CodeSniffer ä¸‹è½½å®‰è£…ï¼š curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar php phpcs.phar -h curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar php phpcbf.phar -h ç„¶åç§»åŠ¨åˆ°å‘½ä»¤ç›®å½•ï¼š\nmv phpcs.phar /usr/bin/phpcs mv phpcbf.phar /usr/bin/phpcbf // ä¹Ÿè®¸ä¸Šé¢éœ€è¦ sudo chmod +x /usr/bin/phpcs chmod +x /usr/bin/phpcbf è¿™é‡Œçš„ phpcbf æ˜¯ä»£ç ä¿®å¤å·¥å…·ã€‚\nä½¿ç”¨ æŸ¥çœ‹å¸®åŠ©ï¼š phpcs --help æ·»åŠ æ ‡å‡†ï¼š phpcs --config-set installed_paths PATH_TO_SEARCH_STANDARDS æ³¨æ„ï¼šå‡è®¾æ ‡å‡†ä¸º Weibo, ç›®å½•ä¸º:\n/Users/overtrue/code_standards/Weibo å…¶ä¸­Weibo é‡Œæ‰æ˜¯ ruleset.xmlï¼Œé‚£ä¹ˆå¯¹åº”ä¸Šé¢çš„ PATH_TO_SEARCH_STANDARDS åº”è¯¥ä¸ºï¼š\nphpcs --config-set installed_paths /Users/overtrue/code_standards æŸ¥çœ‹å·²ç»å®‰è£…çš„æ ‡å‡†ï¼š phpcs -i æŸ¥çœ‹é…ç½®ï¼š phpcs --config-show æ£€æŸ¥ä»£ç è§„èŒƒï¼š phpcs ./codes/Example.php // or phpcs ./codes/ æŒ‡å®šæ ‡å‡†ï¼š\nphpcs ./codes/Example.php --standard=PSR2 æŠ¥å‘Šæ ¼å¼ï¼š\nphpcs --report=summary /path/to/code å¯ç”¨çš„æ ¼å¼æœ‰ï¼ˆé»˜è®¤ä¸º: fullï¼‰ï¼š\nfull, xml, checkstyle, csv json, emacs, source, summary, diff svnblame, gitblame, hgblame or notifysend ä¿®å¤ä»£ç  ç¬¬ä¸€ç§ï¼šä½¿ç”¨ diff å½¢å¼æ‰“è¡¥ä¸ï¼š\nphpcs --report-diff=/path/to/changes.diff /path/to/code patch -p0 -ui /path/to/changes.diff # patching file /path/to/code/file.php ç¬¬äºŒç§ï¼šä½¿ç”¨ PHP Code Beautifier å’Œ Fixerï¼š\nphpcbf /path/to/code ä»¥ä¸Šå‘½ä»¤ä¼šè‡ªåŠ¨ä¿®å¤åŸæ–‡ä»¶ï¼Œå¦‚æœä¸æƒ³ç›´æ¥è¦†ç›–åŸæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ --suffix æŒ‡å®šä¿®å¤åçš„ä»£ç åç¼€ï¼š\nphpcs /path/to/code --suffix=.fixed æ›´å¤š PHPCS çš„ä½¿ç”¨è¯·å‚è€ƒï¼šhttps://github.com/squizlabs/PHP_CodeSniffer/wiki\nPHPMD å®‰è£… åŒæ ·æœ‰ä»¥ä¸‹å®‰è£…æ–¹å¼ï¼š\nä¸‹è½½ phar æ–‡ä»¶å®‰è£…ï¼š wget -c http://static.phpmd.org/php/latest/phpmd.phar mv phpmd.phar /usr/bin/phpmd chmod +x /usr/bin/phpmd ä½¿ç”¨ Composer å®‰è£…ï¼š composer global require phpmd/phpmd ä½¿ç”¨  æ£€æŸ¥ä»£ç è´¨é‡ï¼š  # phpmd ä»£ç è·¯å¾„ æŠ¥å‘Šæ ¼å¼ phpmd /path/to/source text æˆ–è€…æŒ‡å®šè¦æ£€æŸ¥çš„è§„åˆ™ï¼š\n# phpmd ä»£ç è·¯å¾„ æŠ¥å‘Šæ ¼å¼ è§„åˆ™åˆ—è¡¨ phpmd /path/to/source text codesize,unusedcode,naming æˆ–è€…ä½¿ç”¨xmlæŒ‡å®šæ£€æŸ¥è§„åˆ™ï¼š\n# phpmd ä»£ç è·¯å¾„ æŠ¥å‘Šæ ¼å¼ è§„åˆ™xmlæ–‡ä»¶ phpmd /path/to/source text /phpmd_ruleset.xml  æŠ¥å‘Šæ ¼å¼æœ‰ï¼š  xml, ä»¥ XML æ ¼å¼è¾“å‡ºï¼› text, ç®€å•çš„æ–‡æœ¬æ ¼å¼ï¼› html, è¾“å‡ºåˆ°å•ä¸ªçš„htmlï¼›    è¿™é‡Œæœ‰ä¸€ä¸ªphpmdè§„åˆ™å¯å‚è€ƒï¼šhttps://github.com/overtrue/phpmd-rulesets\næ›´å¤šå…³äº PHPMD çš„ä½¿ç”¨è¯·å‚è€ƒï¼šhttp://phpmd.org/documentation/index.html\n","permalink":"https://blog.bitqiu.cc/posts/install-phpcs-and-phpmd/","summary":"","title":"PHPä»£ç è§„èŒƒä¸è´¨é‡æ£€æŸ¥å·¥å…·PHPCS,PHPMDçš„å®‰è£…ä¸é…ç½®"},{"content":"è™½ç„¶åœ¨ /etc/profile ä¸­åŠ äº†å…¨å±€ PATHï¼Œä½†æ˜¯åœ¨ä»¥ sudo -Hu [username] [command] æ‰§è¡Œçš„æ—¶å€™æŠ¥å‘½ä»¤ä¸å­˜åœ¨ï¼ŒåŸå› æ˜¯ /etc/sudoers ä¸­è¿˜æœ‰ä¸€ä¸ª secure_path æ²¡ä¿®æ”¹ï¼š\nvisudo æŸ¥æ‰¾ secure_pathï¼ŒåŠ å…¥ä½ è¦æ·»åŠ çš„ç›®å½•ï¼Œæ¯”å¦‚ /usr/local/bin:\nDefaults secure_path = /sbin:/bin:/usr/sbin:/usr/bin æ”¹ä¸ºï¼š\nDefaults secure_path = /sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin å³å¯ã€‚\n","permalink":"https://blog.bitqiu.cc/posts/cannot-find-command-sudo-hu/","summary":"","title":"sudo -Hu æ‰§è¡Œæ—¶æ‰¾ä¸åˆ°å‘½ä»¤çš„é—®é¢˜è§£å†³"},{"content":"Laravel æä¾›äº†å¾ˆå¤šé»˜è®¤äº‹ä»¶ï¼Œç™»å½•ç™»å‡ºã€æ•°æ®åº“è¿æ¥ä¸æŸ¥è¯¢ã€åº”ç”¨å¯åŠ¨å‰åã€ç¼“å­˜ç­‰ç­‰å¾ˆå¤šé»˜è®¤äº‹ä»¶ï¼Œæœ¬ç¯‡ä»¥ç”¨æˆ·ç™»å½•äº‹ä»¶æ¥æ¼”ç¤ºå¦‚ä½•å¤„ç† Larvel 5 çš„é»˜è®¤äº‹ä»¶ã€‚ æˆ‘ä»¬çš„ç›®çš„ï¼šå¤„ç†ç”¨æˆ·ç™»å½•äº‹ä»¶ï¼Œåœ¨ç”¨æˆ·ç™»å½•çš„æ—¶å€™ç»™ç”¨æˆ·æ·»åŠ æœ€åç™»å½•æ—¶é—´(last_login_at)ï¼Œä»¥åŠæœ€åç™»å½•çš„IP(last_ip)\nç”¨æˆ·çš„ç™»å½•äº‹ä»¶åœ¨ Laravel 5 é‡Œçš„äº‹ä»¶åç§°æ˜¯ auth.loginã€‚\nç¬¬ä¸€æ­¥ï¼šåˆ›å»ºäº‹ä»¶å¤„ç†å™¨ Laravel 5 é‡Œç›´æ¥ä½¿ç”¨å‘½ä»¤å³å¯åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨:\nphp artisan handler:event AuthLoginEventHandler AuthLoginEventHandler æ˜¯æˆ‘ä»¬å®šä¹‰çš„åç§°ï¼Œä½ å¯ä»¥éšæ„å‘½å(åˆç†çš„)ï¼Œå®ƒä¼šåˆ›å»º app/Handlers/Events/AuthLoginEventHandler.php:\n\u0026lt;?php namespace App\\Handlers\\Events; use Illuminate\\Contracts\\Queue\\ShouldBeQueued; use Illuminate\\Queue\\InteractsWithQueue; class AuthLoginEventHandler { /** * Create the event handler. * * @return void */ public function __construct() { //  } /** * Handle the event. * * @param Events $event * @return void */ public function handle(Event $event) { //  } } ç¬¬äºŒæ­¥ï¼šæ³¨å†Œç›‘å¬ æ‰“å¼€ app/Providers/EventServiceProvider.phpï¼Œå°†æˆ‘ä»¬çš„ç›‘å¬æ·»åŠ ä¸Š:\nprotected $listen = [ \u0026#39;auth.login\u0026#39; =\u0026gt; [ \u0026#39;App\\Handlers\\Events\\AuthLoginEventHandler\u0026#39;, ], ]; ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ é€»è¾‘ä»£ç  æˆ‘ä»¬çš„éœ€æ±‚æ˜¯ï¼šåœ¨ç”¨æˆ·ç™»å½•çš„æ—¶å€™ç»™ç”¨æˆ·æ·»åŠ æœ€åç™»å½•æ—¶é—´(last_login_at)ï¼Œä»¥åŠæœ€åç™»å½•çš„IP(last_ip)ã€‚\n æ³¨æ„ï¼šè¿™ä¸¤ä¸ªå­—æ®µæ˜¯æˆ‘è‡ªå·±åˆ›å»ºçš„ å½“ç„¶ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¾‹ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå®Œæˆæ‰€æœ‰ä½ æƒ³è¦çš„éœ€æ±‚ã€‚\n  æ³¨æ„ï¼šæ¡†æ¶é»˜è®¤çš„äº‹ä»¶è§¦å‘æ—¶çš„å‚æ•°éƒ½å¯èƒ½ä¸åŒï¼Œå…·ä½“è¯·æŸ¥çœ‹æ¡†æ¶æºç æˆ–è€…å‚é˜…ç›¸å…³æ–‡æ¡£ã€‚ å°çªé—¨ï¼šä½¿ç”¨ å…³é”®å­— fire(' åœ¨æ¡†æ¶ç›®å½•ä¸­æœç´¢ï¼Œå¯ä»¥å¾—åˆ°å¤§éƒ¨åˆ†çš„æ¡†æ¶äº‹ä»¶çš„è°ƒç”¨å¤„ã€‚\n è¿™é‡Œ auth.login äº‹ä»¶æ¡†æ¶ä¼šä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šç”¨æˆ·å®ä¾‹, æ˜¯å¦è®°ä½ç™»å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ AuthLoginEventHandler.php ä¸­çš„ handle æ–¹æ³•ï¼š\n/** * å¤„ç†ç”¨æˆ·ç™»å½• * * @param User $user ç”¨æˆ· * @param boolean $remember æ˜¯å¦è®°ä½ç™»å½• * * @return void */ public function handle(User $user, $remember) { $user-\u0026gt;last_login_at = Carbon::now(); $user-\u0026gt;last_ip = $this-\u0026gt;request-\u0026gt;ip(); //TODO:å…¶å®ƒåŠ¨ä½œï¼Œæ¯”å¦‚å¢åŠ ç§¯åˆ†ç­‰ç­‰ã€‚  $user-\u0026gt;save(); } å¯ä»¥çœ‹åˆ°ä¸Šé¢æˆ‘ä»¬ç”¨åˆ°äº† Illuminate\\Http\\Request å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ ä¸€ä¸ªå±æ€§ protected $requestï¼Œç„¶åä»æ„é€ æ–¹æ³• __construct è®©æ¡†æ¶æ³¨å…¥è¿›æ¥ï¼ˆç”±æ¡†æ¶å®Œæˆæ³¨å…¥ï¼‰ï¼š\n... /** * Request å¯¹è±¡ * * @var Illuminate\\Http\\Request */ protected $request; /** * Create the event handler. * * @return void */ public function __construct(Request $request) { $this-\u0026gt;request = $request; } ... æˆ‘ä»¬æ‰€æœ‰ç”¨åˆ°çš„ç±»è¯·è®°å¾—å¼•å…¥ã€‚æœ€åå®Œæ•´çš„ AuthLoginEventHandler.php å¦‚ä¸‹ï¼š\n\u0026lt;?php namespace App\\Handlers\\Events; use Illuminate\\Contracts\\Queue\\ShouldBeQueued; use Illuminate\\Queue\\InteractsWithQueue; use Illuminate\\Http\\Request; use App\\Models\\User; use Carbon\\Carbon; class AuthLoginEventHandler { /** * Request å¯¹è±¡ * * @var Illuminate\\Http\\Request */ protected $request; /** * Create the event handler. * * @return void */ public function __construct(Request $request) { $this-\u0026gt;request = $request; } /** * å¤„ç†ç”¨æˆ·ç™»å½• * * @param User $user ç”¨æˆ· * @param boolean $remember æ˜¯å¦è®°ä½ç™»å½• * * @return void */ public function handle(User $user, $remember) { $user-\u0026gt;last_login_at = Carbon::now(); $user-\u0026gt;last_ip = $this-\u0026gt;request-\u0026gt;ip(); //TODO:å…¶å®ƒåŠ¨ä½œï¼Œæ¯”å¦‚å¢åŠ ç§¯åˆ†ç­‰ç­‰ã€‚  $user-\u0026gt;save(); } } ç„¶ååœ¨ç”¨æˆ·ç™»å½•çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨ç»™ç”¨æˆ·å­—æ®µ last_login_at å’Œ last_ip è¡¥å……å†…å®¹äº†ã€‚æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ï¼Ÿ\n","permalink":"https://blog.bitqiu.cc/posts/laravel-login-event-handler/","summary":"","title":"å¤„ç† Laravel 5 é»˜è®¤äº‹ä»¶"},{"content":"æˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦è·å–å½“å‰ Laravel é¡¹ç›®çš„æ§åˆ¶å™¨æˆ–è€…æ–¹æ³•åï¼Œæ¡†æ¶é»˜è®¤æ˜¯ä¸ä¼šæä¾›å•ç‹¬çš„æ–¹æ³•çš„ï¼Œæ¡†æ¶åªæä¾›äº†å¦‚ä¸‹çš„æ–¹æ³•ï¼š\n\\Route::current()-\u0026gt;getActionName(); è¿”å›çš„ç»“æœæ˜¯ï¼š\nApp\\Http\\Controllers\\WelcomeController@index å¯æ˜¯è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬åªæƒ³è·å–æ§åˆ¶å™¨åæˆ–è€…æ–¹æ³•åï¼Œé‚£ä¹ˆï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ä¸‹é¢ä¸‰ä¸ªå‡½æ•°æ¥å®ç°ï¼š\n/** * è·å–å½“å‰æ§åˆ¶å™¨å * * @return string */ public function getCurrentControllerName() { return getCurrentAction()[\u0026#39;controller\u0026#39;]; } /** * è·å–å½“å‰æ–¹æ³•å * * @return string */ public function getCurrentMethodName() { return getCurrentAction()[\u0026#39;method\u0026#39;]; } /** * è·å–å½“å‰æ§åˆ¶å™¨ä¸æ–¹æ³• * * @return array */ public function getCurrentAction() { $action = \\Route::current()-\u0026gt;getActionName(); list($class, $method) = explode(\u0026#39;@\u0026#39;, $action); return [\u0026#39;controller\u0026#39; =\u0026gt; $class, \u0026#39;method\u0026#39; =\u0026gt; $method]; } å¦å¤–æ¨èè¿‘æœŸå®Œæˆçš„ä¸¤ä¸ª Laravel æ‹“å±•åŒ…ï¼š\n overtrue/laravel-lang åŸºäº Laravel4-lang çš„ 44 è¯­ç§è¯­è¨€æ–‡ä»¶ overtrue/laravel-pinyin Laravel ä¸­æ–‡è½¬æ‹¼éŸ³ï¼Œ åŸºäº overtrue/pinyin ","permalink":"https://blog.bitqiu.cc/posts/get-current-controller-of-laravel/","summary":"","title":"Laravel è·å–å½“å‰æ§åˆ¶å™¨åç§°æˆ–æ–¹æ³•"},{"content":"å½“æˆ‘ä»¬åœ¨å­˜å‚¨mongoæ•°æ®çš„æ—¶å€™ï¼Œæ•´å‹å­—æ®µå­˜å‚¨çš„å€¼ä¸ºNumberLongæ ¼å¼ï¼Œé‚£ä¹ˆå¦‚æœè¿™ä¸ªidæ¥è‡ªäºMySQLï¼Œåœ¨ä½¿ç”¨MySQLæ¨¡å‹ä¸MongoDBå…³è”æŸ¥è¯¢æ—¶å°±ä¼šè¸©åˆ°è¿™ä¸ªå‘ï¼Œä»jenssegers/laravel-mongodbç”Ÿæˆçš„SQLå¯ä»¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœï¼š\n...{\u0026#34;object_id\u0026#34;:{\u0026#34;$in\u0026#34;:[\u0026#34;13\u0026#34;, \u0026#34;15\u0026#34;]}}... å¯æ˜¯æˆ‘ä»¬çš„æœŸæœ›æ˜¯ï¼š\n...{\u0026#34;object_id\u0026#34;:{\u0026#34;$in\u0026#34;:[13, 15]}}... è¿™é‡Œçš„13ã€15æ˜¯MySQLé‡Œçš„ä¸€æ¡è®°å½•ï¼Œåœ¨mongoé‡Œçš„å€¼ä¸ºNumberLong(13)ï¼Œ æ‰€ä»¥æŸ¥è¯¢ç»“æœæ°¸è¿œä¸ºç©ºã€‚ æ‰¾éäº†æºç ï¼Œæ²¡æœ‰ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ³•ï¼Œåæ¥åªèƒ½ä½¿ç”¨Eloquentæ¨¡å‹æä¾›çš„å±æ€§ä¿®æ”¹å™¨æ¥å®ç°ï¼š\nåœ¨MySQLçš„æ¨¡å‹é‡Œå¯¹ç›¸åº”å­—æ®µä½¿ç”¨ä¿®æ”¹å™¨(è¿™é‡Œä»¥idä¸ºä¾‹)ï¼š\n/** * é¿å…ä¸mongoå…³è”æ—¶idè½¬ä¸ºå­—ç¬¦çš„é—®é¢˜ * * @param string $id * * @return int */ public function getIdAttribute($id) { return intval($id); } æ–¹æ³•åï¼šgetå±æ€§åå¤§é©¼å³°Attribute, ex: object_id -\u0026gt; getObjectIdAttribute\næ¡†æ¶æºç å‚è€ƒï¼šgetAttribute\n","permalink":"https://blog.bitqiu.cc/posts/laravel-mongodb-field-type-bug/","summary":"","title":"Laravelæ‹“å±•jenssegers/laravel-mongodbä¸MySQLå…³è”æŸ¥è¯¢å­—æ®µç±»å‹ä¸ä¸€è‡´é—®é¢˜è§£å†³æ–¹æ¡ˆ"},{"content":"EXPLAINæ˜¾ç¤ºäº†MySQLå¦‚ä½•ä½¿ç”¨ç´¢å¼•æ¥å¤„ç†SELECTè¯­å¥ä»¥åŠè¿æ¥è¡¨ã€‚å¯ä»¥å¸®åŠ©é€‰æ‹©æ›´å¥½çš„ç´¢å¼•å’Œå†™å‡ºæ›´ä¼˜åŒ–çš„æŸ¥è¯¢è¯­å¥ã€‚ ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨selectè¯­å¥å‰åŠ ä¸ŠEXPLAINå°±å¯ä»¥äº†ï¼š\nå¦‚ï¼š\nEXPLAIN SELECT `surname`,`first_name` FORM `a`,`b` WHERE `a`.`id`=`b`.`id` EXPLAINåˆ—çš„è§£é‡Šï¼š\n   åˆ— æè¿°     table æ˜¾ç¤ºè¿™ä¸€è¡Œçš„æ•°æ®æ˜¯å…³äºå“ªå¼ è¡¨çš„ã€‚   type è¿™æ˜¯é‡è¦çš„åˆ—ï¼Œæ˜¾ç¤ºè¿æ¥ä½¿ç”¨äº†ä½•ç§ç±»å‹ã€‚ä»æœ€å¥½åˆ°æœ€å·®çš„è¿æ¥ç±»å‹ä¸º constã€eq_regã€refã€rangeã€indexå’ŒALLã€‚   possible_keys æ˜¾ç¤ºå¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨ä¸­çš„ç´¢å¼•ã€‚å¦‚æœä¸ºç©ºï¼Œæ²¡æœ‰å¯èƒ½çš„ç´¢å¼•ã€‚å¯ä»¥ä¸ºç›¸å…³çš„åŸŸä»WHEREè¯­å¥ä¸­é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„è¯­å¥ã€‚   key å®é™…ä½¿ç”¨çš„ç´¢å¼•ã€‚å¦‚æœä¸ºNULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ã€‚å¾ˆå°‘çš„æƒ…å†µä¸‹ï¼ŒMySQLä¼šé€‰æ‹©ä¼˜åŒ–ä¸è¶³çš„ç´¢å¼•ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨SELECTè¯­å¥ä¸­ä½¿ç”¨USE INDEXï¼ˆindexnameï¼‰ æ¥å¼ºåˆ¶ä½¿ç”¨ä¸€ä¸ªç´¢å¼•æˆ–è€…ç”¨IGNORE INDEXï¼ˆindexnameï¼‰æ¥å¼ºåˆ¶MySQLå¿½ç•¥ç´¢å¼•ã€‚   key_len ä½¿ç”¨çš„ç´¢å¼•çš„é•¿åº¦ã€‚åœ¨ä¸æŸå¤±ç²¾ç¡®æ€§çš„æƒ…å†µä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½ã€‚   ref æ˜¾ç¤ºç´¢å¼•çš„å“ªä¸€åˆ—è¢«ä½¿ç”¨äº†ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œæ˜¯ä¸€ä¸ªå¸¸æ•°ã€‚   rows MySQLè®¤ä¸ºå¿…é¡»æ£€æŸ¥çš„ç”¨æ¥è¿”å›è¯·æ±‚æ•°æ®çš„è¡Œæ•°ã€‚   Extra å…³äºMySQLå¦‚ä½•è§£ææŸ¥è¯¢çš„é¢å¤–ä¿¡æ¯ã€‚å°†åœ¨è¡¨4.3ä¸­è®¨è®ºï¼Œä½†è¿™é‡Œå¯ä»¥çœ‹åˆ°çš„åçš„ä¾‹å­æ˜¯Using temporaryå’ŒUsing filesortï¼Œæ„æ€MySQLæ ¹æœ¬ä¸èƒ½ä½¿ç”¨ç´¢å¼•ï¼Œç»“æœæ˜¯æ£€ç´¢ä¼šå¾ˆæ…¢ã€‚    extraåˆ—è¿”å›çš„æè¿°çš„æ„ä¹‰ï¼š\n   å€¼ æ„ä¹‰     Distinct ä¸€æ—¦MySQLæ‰¾åˆ°äº†ä¸è¡Œç›¸è”åˆåŒ¹é…çš„è¡Œï¼Œå°±ä¸å†æœç´¢äº†ã€‚   Not exists MySQLä¼˜åŒ–äº†LEFT JOINï¼Œä¸€æ—¦å®ƒæ‰¾åˆ°äº†åŒ¹é…LEFT JOINæ ‡å‡†çš„è¡Œï¼Œå°±ä¸å†æœç´¢äº†ã€‚   Range checked for each Recordï¼ˆindex map:#ï¼‰ æ²¡æœ‰æ‰¾åˆ°ç†æƒ³çš„ç´¢å¼•ï¼Œå› æ­¤å¯¹äºä»å‰é¢è¡¨ä¸­æ¥çš„æ¯ä¸€ä¸ªè¡Œç»„åˆï¼ŒMySQLæ£€æŸ¥ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼Œå¹¶ç”¨å®ƒæ¥ä»è¡¨ä¸­è¿”å›è¡Œã€‚è¿™æ˜¯ä½¿ç”¨ç´¢å¼•çš„æœ€æ…¢çš„è¿æ¥ä¹‹ä¸€ã€‚   Using filesort çœ‹åˆ°è¿™ä¸ªçš„æ—¶å€™ï¼ŒæŸ¥è¯¢å°±éœ€è¦ä¼˜åŒ–äº†ã€‚MySQLéœ€è¦è¿›è¡Œé¢å¤–çš„æ­¥éª¤æ¥å‘ç°å¦‚ä½•å¯¹è¿”å›çš„è¡Œæ’åºã€‚å®ƒæ ¹æ®è¿æ¥ç±»å‹ä»¥åŠå­˜å‚¨æ’åºé”®å€¼å’ŒåŒ¹é…æ¡ä»¶çš„å…¨éƒ¨è¡Œçš„è¡ŒæŒ‡é’ˆæ¥æ’åºå…¨éƒ¨è¡Œã€‚   Using index åˆ—æ•°æ®æ˜¯ä»ä»…ä»…ä½¿ç”¨äº†ç´¢å¼•ä¸­çš„ä¿¡æ¯è€Œæ²¡æœ‰è¯»å–å®é™…çš„è¡ŒåŠ¨çš„è¡¨è¿”å›çš„ï¼Œè¿™å‘ç”Ÿåœ¨å¯¹è¡¨çš„å…¨éƒ¨çš„è¯·æ±‚åˆ—éƒ½æ˜¯åŒä¸€ä¸ªç´¢å¼•çš„éƒ¨åˆ†çš„æ—¶å€™ã€‚   Using temporary çœ‹åˆ°è¿™ä¸ªçš„æ—¶å€™ï¼ŒæŸ¥è¯¢éœ€è¦ä¼˜åŒ–äº†ã€‚è¿™é‡Œï¼ŒMySQLéœ€è¦åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨æ¥å­˜å‚¨ç»“æœï¼Œè¿™é€šå¸¸å‘ç”Ÿåœ¨å¯¹ä¸åŒçš„åˆ—é›†è¿›è¡ŒORDER BYä¸Šï¼Œè€Œä¸æ˜¯GROUP BYä¸Šã€‚   Where used ä½¿ç”¨äº†WHEREä»å¥æ¥é™åˆ¶å“ªäº›è¡Œå°†ä¸ä¸‹ä¸€å¼ è¡¨åŒ¹é…æˆ–è€…æ˜¯è¿”å›ç»™ç”¨æˆ·ã€‚å¦‚æœä¸æƒ³è¿”å›è¡¨ä¸­çš„å…¨éƒ¨è¡Œï¼Œå¹¶ä¸”è¿æ¥ç±»å‹ALLæˆ–indexï¼Œè¿™å°±ä¼šå‘ç”Ÿï¼Œæˆ–è€…æ˜¯æŸ¥è¯¢æœ‰é—®é¢˜ä¸åŒè¿æ¥ç±»å‹çš„è§£é‡Šï¼ˆæŒ‰ç…§æ•ˆç‡é«˜ä½çš„é¡ºåºæ’åºï¼‰ã€‚   system è¡¨åªæœ‰ä¸€è¡Œ system è¡¨ã€‚è¿™æ˜¯constè¿æ¥ç±»å‹çš„ç‰¹æ®Šæƒ…å†µ ã€‚   const è¡¨ä¸­çš„ä¸€ä¸ªè®°å½•çš„æœ€å¤§å€¼èƒ½å¤ŸåŒ¹é…è¿™ä¸ªæŸ¥è¯¢ï¼ˆç´¢å¼•å¯ä»¥æ˜¯ä¸»é”®æˆ–æƒŸä¸€ç´¢å¼•ï¼‰ã€‚å› ä¸ºåªæœ‰ä¸€è¡Œï¼Œè¿™ä¸ªå€¼å®é™…å°±æ˜¯å¸¸æ•°ï¼Œå› ä¸ºMySQLå…ˆè¯»è¿™ä¸ªå€¼ç„¶åæŠŠå®ƒå½“åšå¸¸æ•°æ¥å¯¹å¾…ã€‚   eq_ref åœ¨è¿æ¥ä¸­ï¼ŒMySQLåœ¨æŸ¥è¯¢æ—¶ï¼Œä»å‰é¢çš„è¡¨ä¸­ï¼Œå¯¹æ¯ä¸€ä¸ªè®°å½•çš„è”åˆéƒ½ä»è¡¨ä¸­è¯»å–ä¸€ä¸ªè®°å½•ï¼Œå®ƒåœ¨æŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ä¸ºä¸»é”®æˆ–æƒŸä¸€é”®çš„å…¨éƒ¨æ—¶ä½¿ç”¨ã€‚   ref è¿™ä¸ªè¿æ¥ç±»å‹åªæœ‰åœ¨æŸ¥è¯¢ä½¿ç”¨äº†ä¸æ˜¯æƒŸä¸€æˆ–ä¸»é”®çš„é”®æˆ–è€…æ˜¯è¿™äº›ç±»å‹çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚ï¼Œåˆ©ç”¨æœ€å·¦è¾¹å‰ç¼€ï¼‰æ—¶å‘ç”Ÿã€‚å¯¹äºä¹‹å‰çš„è¡¨çš„æ¯ä¸€ä¸ªè¡Œè”åˆï¼Œå…¨éƒ¨è®°å½•éƒ½å°†ä»è¡¨ä¸­è¯»å‡ºã€‚è¿™ä¸ªç±»å‹ä¸¥é‡ä¾èµ–äºæ ¹æ®ç´¢å¼•åŒ¹é…çš„è®°å½•å¤šå°‘â€”è¶Šå°‘è¶Šå¥½ã€‚   range è¿™ä¸ªè¿æ¥ç±»å‹ä½¿ç”¨ç´¢å¼•è¿”å›ä¸€ä¸ªèŒƒå›´ä¸­çš„è¡Œï¼Œæ¯”å¦‚ä½¿ç”¨\u0026gt;æˆ–\u0026lt;æŸ¥æ‰¾ä¸œè¥¿æ—¶å‘ç”Ÿçš„æƒ…å†µã€‚   index è¿™ä¸ªè¿æ¥ç±»å‹å¯¹å‰é¢çš„è¡¨ä¸­çš„æ¯ä¸€ä¸ªè®°å½•è”åˆè¿›è¡Œå®Œå…¨æ‰«æï¼ˆæ¯”ALLæ›´å¥½ï¼Œå› ä¸ºç´¢å¼•ä¸€èˆ¬å°äºè¡¨æ•°æ®ï¼‰ã€‚   ALL è¿™ä¸ªè¿æ¥ç±»å‹å¯¹äºå‰é¢çš„æ¯ä¸€ä¸ªè®°å½•è”åˆè¿›è¡Œå®Œå…¨æ‰«æï¼Œè¿™ä¸€èˆ¬æ¯”è¾ƒç³Ÿç³•ï¼Œåº”è¯¥å°½é‡é¿å…ã€‚   ","permalink":"https://blog.bitqiu.cc/posts/mysql-explain/","summary":"","title":"MySQLä¸­EXPLAINå‘½ä»¤è¯¦è§£"},{"content":"PHPæ˜¯å¼±ç±»å‹ï¼ŒåŠ¨æ€çš„è¯­è¨€è„šæœ¬ã€‚åœ¨ç”³æ˜ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦æŒ‡æ˜å®ƒä¿å­˜çš„æ•°æ®ç±»å‹ã€‚ ä¾‹å¦‚ï¼š\n\u0026lt;?php $var = 1; $var = \u0026#34;variable\u0026#34;; $var = 1.00; $var = array(); $var = new Object(); åŠ¨æ€å˜é‡ï¼Œåœ¨è¿è¡ŒæœŸé—´æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨å‰æ— éœ€å£°æ˜å˜é‡ç±»å‹ã€‚\né—®é¢˜ä¸€ã€Zendå¼•æ“æ˜¯å¦‚ä½•ç”¨Cå®ç°è¿™ç§å¼±ç±»å‹çš„å‘¢ï¼Ÿ\nå®é™…ä¸Šï¼Œåœ¨PHPä¸­å£°æ˜çš„å˜é‡ï¼Œåœ¨ZEä¸­éƒ½æ˜¯ç”¨ç»“æ„ä½“zvalæ¥ä¿å­˜çš„ã€‚ é¦–å…ˆæˆ‘ä»¬æ‰“å¼€Zend/zend.hæ¥çœ‹zvalçš„å®šä¹‰ï¼š\ntypedef struct _zval_struct zval; struct _zval_struct { /* Variable information */ zvalue_value value; /* value */ zend_uint refcount__gc; zend_uchar type; /* active type */ zend_uchar is_ref__gc; }; typedef union _zvalue_value { long lval; /* long value */ double dval; /* double value */ struct { char *val; int len; } str; HashTable *ht; /* hash table value */ zend_object_value obj; } zvalue_value; Zend/zend_types.hï¼š\ntypedef unsigned char zend_bool; typedef unsigned char zend_uchar; typedef unsigned int zend_uint; typedef unsigned long zend_ulong; typedef unsigned short zend_ushort; ä»ä¸Šè¿°ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°_zvalue_valueæ˜¯çœŸæ­£ä¿å­˜æ•°æ®çš„å…³é”®éƒ¨åˆ†ã€‚é€šè¿‡å…±ç”¨ä½“å®ç°çš„å¼±ç±»å‹å˜é‡å£°æ˜\né—®é¢˜äºŒã€Zendå¼•æ“æ˜¯å¦‚ä½•åˆ¤åˆ«ã€å­˜å‚¨PHPä¸­çš„å¤šç§æ•°æ®ç±»å‹çš„å‘¢ï¼Ÿ\n_zval_struct.typeä¸­å­˜å‚¨ç€ä¸€ä¸ªå˜é‡çš„çœŸæ­£ç±»å‹ï¼Œæ ¹æ®typeæ¥é€‰æ‹©å¦‚ä½•è·å–zvalue_valueçš„å€¼ã€‚\ntypeå€¼åˆ—è¡¨(Zend/zend.h)ï¼š\n#define IS_NULL 0 #define IS_LONG 1 #define IS_DOUBLE 2 #define IS_BOOL 3 #define IS_ARRAY 4 #define IS_OBJECT 5 #define IS_STRING 6 #define IS_RESOURCE 7 #define IS_CONSTANT 8 #define IS_CONSTANT_ARRAY 9 æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\u0026lt;?php $a = 1; //æ­¤æ—¶zval.type = IS_LONG,é‚£ä¹ˆzval.valueå°±å»å–lval. $a = array(); //æ­¤æ—¶zval.type = IS_ARRAY,é‚£ä¹ˆzval.valueå°±å»å–ht. è¿™å…¶ä¸­æœ€å¤æ‚çš„ï¼Œå¹¶ä¸”åœ¨å¼€å‘ç¬¬ä¸‰æ–¹æ‰©å±•ä¸­ç»å¸¸éœ€è¦ç”¨åˆ°çš„æ˜¯\u0026quot;èµ„æºç±»å‹\u0026quot;. åœ¨PHPä¸­ï¼Œä»»ä½•ä¸å±äºPHPçš„å†…å»ºçš„å˜é‡ç±»å‹çš„å˜é‡ï¼Œéƒ½ä¼šè¢«çœ‹ä½œèµ„æºæ¥è¿›è¡Œä¿å­˜ã€‚ æ¯”å¦‚ï¼šæ•°æ®åº“å¥æŸ„ã€æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„ã€æ‰“å¼€çš„socketå¥æŸ„ã€‚\nèµ„æºç±»å‹ï¼Œä¼šç”¨lvalï¼Œæ­¤æ—¶å®ƒæ˜¯ä¸€ä¸ªæ•´å‹æŒ‡ç¤ºå™¨ï¼Œ ç„¶åPHPä¼šå†æ ¹æ®è¿™ä¸ªæŒ‡ç¤ºå™¨åœ¨PHPå†…å»ºçš„ä¸€ä¸ªèµ„æºåˆ—è¡¨ä¸­æŸ¥è¯¢ç›¸å¯¹åº”çš„èµ„æºã€‚\næ­£æ˜¯å› ä¸ºZEè¿™æ ·çš„å¤„ç†æ–¹å¼ï¼Œä½¿PHPå°±å®ç°äº†å¼±ç±»å‹ï¼Œè€Œå¯¹äºZEçš„æ¥è¯´ï¼Œå®ƒæ‰€é¢å¯¹çš„æ°¸è¿œéƒ½æ˜¯åŒä¸€ç§ç±»å‹zvalã€‚\nè½¬è‡ªï¼šhttp://allensuiverson.blog.163.com/blog/static/13364826920131013103226827/\n","permalink":"https://blog.bitqiu.cc/posts/php-variable-principle/","summary":"","title":"PHPçš„å¼±ç±»å‹å®ç°"},{"content":"åˆ°ç›®å‰ä¸ºæ­¢è¿™å¯èƒ½æ˜¯æœ€å‡†ç¡®çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆäº†ï¼Œå¤§GitHubä¸Šå„ç§æ‰¾ï¼Œæ²¡æœ‰ä¸€ä¸ªå¥½ç”¨çš„ï¼Œå¤§éƒ¨åˆ†éƒ½åªæ˜¯æ±‰å­—è½¬æ‹¼éŸ³ï¼Œæ‰€ä»¥åŒ…å«å¤šéŸ³å­—çš„ç»“æœåŸºæœ¬éƒ½é”™è¯¯ã€‚ å½“ç„¶ä¹Ÿæœ‰åŸºäºè¯å…¸çš„è½¬æ¢å·¥å…·ï¼Œä¸è¿‡è¿˜æ˜¯è§£å†³ä¸äº†è¯åº“ä¸å…¨é€ æˆçš„å¤šéŸ³å­—é—®é¢˜ï¼ˆå½“ç„¶ï¼Œå®Œå…¨è§£å†³æ˜¯ä¸å¤ªå¯èƒ½çš„ï¼Œæˆ–è€…è¯åº“ä¼šæ— æ¯”çš„å¤§ï¼‰ã€‚æ¯”å¦‚åº·ç†™æ¥äº† å¤§éƒ¨åˆ†å·¥å…·çš„è¯•ç”¨ç»“æœæ˜¯ï¼škang xi lai liao.\nåŸºäºä¸Šé¢çš„åŸå› ï¼Œæˆ‘é€ äº†ä¸‹é¢è¿™ä¸ªè½®å­ã€‚ç‰¹ç‚¹å¦‚ä¸‹:\n åŸºäºCC-CEDICT.è¯å…¸ï¼Œè§£å†³å¤§éƒ¨åˆ†è¯æ±‡é—®é¢˜ï¼› æ·»åŠ è¡¥å……è¯å…¸ï¼Œè§£å†³CC-CEDICTä¸å…¨æˆ–è€…ä¸å‡†ç¡®çš„é—®é¢˜ï¼› æ·»åŠ è¯é¢‘è¡¨ï¼Œæ ¹æ®ä½¿ç”¨é¢‘ç‡å†ä¸€æ­¥æé«˜å¤šéŸ³å­—çš„å‡†ç¡®åº¦ï¼›  Pinyin ä¸»é¡µï¼šhttp://overtrue.me/pinyin\nåŸºäºCC-CEDICTè¯å…¸çš„ä¸­æ–‡è½¬æ‹¼éŸ³å·¥å…·, æ›´å‡†ç¡®çš„æ±‰å­—è½¬æ‹¼éŸ³è§£å†³æ–¹æ¡ˆã€‚ CC-CEDICT.\nuse \\Overtrue\\Pinyin; echo Pinyin::pinyin(\u0026#39;å¸¦ç€å¸Œæœ›å»æ—…è¡Œï¼Œæ¯”åˆ°è¾¾ç»ˆç‚¹æ›´ç¾å¥½\u0026#39;); // dÃ i zhe xÄ« wÃ ng qÃ¹ lÇ” xÃ­ng bÇ dÃ o dÃ¡ zhÅng diÇn gÃ¨ng mÄ›i hÇo  //å¤šéŸ³å­— // äº† Pinyin::pinyin(\u0026#39;äº†ç„¶\u0026#39;); // liÇo rÃ¡n Pinyin::pinyin(\u0026#39;æ¥äº†\u0026#39;); // lÃ¡i le  // è¿˜ Pinyin::pinyin(\u0026#39;è¿˜æœ‰\u0026#39;); // hÃ¡i yÇ’u Pinyin::pinyin(\u0026#39;äº¤è¿˜\u0026#39;); // jiÄo huÃ¡n  // ä»€ Pinyin::pinyin(\u0026#39;ä»€ä¹ˆ\u0026#39;); // shÃ©n me Pinyin::pinyin(\u0026#39;ä»€é”¦\u0026#39;); // shÃ­ jÇn  // ä¾¿ Pinyin::pinyin(\u0026#39;ä¾¿å½“\u0026#39;); // biÃ n dÄng Pinyin::pinyin(\u0026#39;ä¾¿å®œ\u0026#39;); // piÃ¡n yÃ­  // å‰¥ Pinyin::pinyin(\u0026#39;å‰¥çš®\u0026#39;); // bÄo pÃ­ Pinyin::pinyin(\u0026#39;å‰¥çš®å™¨\u0026#39;); // bÅ pÃ­ qÃ¬  // ä¸ Pinyin::pinyin(\u0026#39;èµ”ä¸æ˜¯\u0026#39;); // pÃ©i bÃº shi Pinyin::pinyin(\u0026#39;è·‘äº†å’Œå°šï¼Œè·‘ä¸äº†åº™\u0026#39;); // pÇo le hÃ© shÃ ng , pÇo bÃ¹ liÇo miÃ o  // é™ Pinyin::pinyin(\u0026#39;é™æ¸©\u0026#39;); // jiÃ ng wÄ“n Pinyin::pinyin(\u0026#39;æŠ•é™\u0026#39;); // tÃ³u xiÃ¡ng  // éƒ½ Pinyin::pinyin(\u0026#39;é¦–éƒ½\u0026#39;); // shÇ’u dÅ« Pinyin::pinyin(\u0026#39;éƒ½ä»€ä¹ˆå¹´ä»£äº†\u0026#39;); // dÅu shÃ©n me niÃ¡n dÃ i le  // ä¹ Pinyin::pinyin(\u0026#39;å¿«ä¹\u0026#39;); // kuÃ i lÃ¨ Pinyin::pinyin(\u0026#39;éŸ³ä¹\u0026#39;); // yÄ«n yuÃ¨  // é•¿ Pinyin::pinyin(\u0026#39;æˆé•¿\u0026#39;); // chÃ©ng zhÇng Pinyin::pinyin(\u0026#39;é•¿æ±Ÿ\u0026#39;); // chÃ¡ng jiÄng  // éš¾ Pinyin::pinyin(\u0026#39;éš¾æ°‘\u0026#39;); // nÃ n mÃ­n Pinyin::pinyin(\u0026#39;éš¾è¿‡\u0026#39;); // nÃ¡n guÃ² ... å®‰è£…  ä½¿ç”¨ Composer å®‰è£…:  composer require overtrue/pinyin \u0026gt;=1.4 æˆ–è€…åœ¨ä½ çš„é¡¹ç›®composer.jsonåŠ å…¥ï¼š\n{ \u0026#34;require\u0026#34;: { \u0026#34;overtrue/pinyin\u0026#34;: \u0026#34;\u0026gt;=1.4\u0026#34; } } ç›´æ¥ä¸‹è½½æ–‡ä»¶ src/Overtrue/Pinyin.php å¼•å…¥åˆ°é¡¹ç›®ä¸­ã€‚  ä½¿ç”¨ \u0026lt;?php use \\Overtrue\\Pinyin; //è·å–æ‹¼éŸ³ echo Pinyin::pinyin(\u0026#39;å¸¦ç€å¸Œæœ›å»æ—…è¡Œï¼Œæ¯”åˆ°è¾¾ç»ˆç‚¹æ›´ç¾å¥½\u0026#39;); //æˆ–è€…: Overtrue\\pinyin($string); // dÃ i zhe xÄ« wÃ ng qÃ¹ lÇ” xÃ­ng bÇ dÃ o dÃ¡ zhÅng diÇn gÃ¨ng mÄ›i hÇo  //è·å–é¦–å­—æ¯ echo Pinyin::letter(\u0026#39;å¸¦ç€å¸Œæœ›å»æ—…è¡Œï¼Œæ¯”åˆ°è¾¾ç»ˆç‚¹æ›´ç¾å¥½\u0026#39;); // D Z X W Q L X B D D Z D G M H  è®¾ç½®  delimiter åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºä¸€ä¸ªç©ºæ ¼ ' \u0026lsquo;ï¼› traditional ç¹ä½“ accent æ˜¯å¦è¾“å‡ºéŸ³è°ƒï¼› letter åªè¾“å‡ºé¦–å­—æ¯ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨Pinyin::letter($string); only_chinese åªä¿ç•™$stringä¸­ä¸­æ–‡éƒ¨åˆ†ã€‚    å…¨å±€è®¾ç½®ï¼š* Pinyin::set('delimiter', '-');\n  ä¸´æ—¶è®¾ç½®ï¼š* Pinyin::pinyin($word, $settings) åœ¨è°ƒç”¨çš„æ–¹æ³•åä¼ å‚\n  example:\nPinyin::set(\u0026#39;delimiter\u0026#39;, \u0026#39;-\u0026#39;);//å…¨å±€ echo Pinyin::pinyin(\u0026#39;å¸¦ç€å¸Œæœ›å»æ—…è¡Œï¼Œæ¯”åˆ°è¾¾ç»ˆç‚¹æ›´ç¾å¥½\u0026#39;); // dÃ i-zhe-xÄ«-wÃ ng-qÃ¹-lÇ”-xÃ­ng-bÇ-dÃ o-dÃ¡-zhÅng-diÇn-gÃ¨ng-mÄ›i-hÇo $setting = [ \u0026#39;delimiter\u0026#39; =\u0026gt; \u0026#39;-\u0026#39;, \u0026#39;accent\u0026#39; =\u0026gt; false, ]; echo Pinyin::pinyin(\u0026#39;å¸¦ç€å¸Œæœ›å»æ—…è¡Œï¼Œæ¯”åˆ°è¾¾ç»ˆç‚¹æ›´ç¾å¥½\u0026#39;, $setting);//è¿™é‡Œçš„settingåªæ˜¯ä¸´æ—¶ä¿®æ”¹ï¼Œå¹¶éå…¨å±€è®¾ç½®  // dai-zhe-xi-wang-qu-lu-xing-bi-dao-da-zhong-dian-geng-mei-hao Pinyin::set(\u0026#39;accent\u0026#39;, false); echo Pinyin::pinyin(\u0026#39;å¸¦ç€å¸Œæœ›å»æ—…è¡Œï¼Œæ¯”åˆ°è¾¾ç»ˆç‚¹æ›´ç¾å¥½\u0026#39;); // dai zhe xi wang qu lu xing bi dao da zhong dian geng mei hao Contribution æ¬¢è¿ææ„è§åŠå®Œå–„è¡¥å……è¯åº“ src/Overtrue/data/additional.php! ğŸ’‹\nå‚è€ƒ  CC-CEDICT ç¾ä»£æ¼¢èªèªéŸ³èªæ–™åº« æ±‰å…¸  License MIT\n","permalink":"https://blog.bitqiu.cc/posts/php-chinese-to-pinyin/","summary":"","title":"PHPæ±‰å­—è½¬æ‹¼éŸ³æ›´å‡†ç¡®çš„è§£å†³æ–¹æ¡ˆ"},{"content":"ä»Šå¤©ä¸Šåˆåœ¨å®¶é‡Œçš„å°å¼æœºä¸Šæ›´æ–°GitHubå®¢æˆ·ç«¯åå‘ç°æ— æ³•cloneäº†ï¼Œåæ¥æ‰“å¼€git shell å»cloneï¼Œå‘ç°æŠ¥é”™å¦‚ä¸‹ï¼š\nXXXXXX,Protocol https not supported or disabled in libcurl ç½‘ä¸Šæ‰¾äº†åŠå¤©ç»ˆäºæ‰¾åˆ°ä¸€ä¸ªSourceTreeåŒæ ·é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼Œåº”è¯¥æ˜¯win7 64ä½è‡ªå¸¦çš„\u0026quot;libcurl.dll\u0026quot;ï¼Œå¯¹äºhttpsçš„æŸäº›é™åˆ¶å¯¼è‡´çš„ã€‚æœç´¢GitHubå®‰è£…ç›®å½•çš„libcurl.dllï¼š\nC:\\Users\\ä½ çš„ç”¨æˆ·å\\AppData\\Local\\GitHub\\PortableGit_7eaa994416ae7b397b2628033ac45f8ff6ac2010\\bin ç„¶åæ‹·è´åˆ°C:\\Windows\\SysWOW64ä¸‹é¢å°±è§£å†³é—®é¢˜äº†ã€‚\n","permalink":"https://blog.bitqiu.cc/posts/github-windows-https-error/","summary":"","title":"GitHub windowså®¢æˆ·ç«¯æŠ¥httpsé”™è¯¯è§£å†³åŠæ³•"},{"content":"ä¸€.æ•°æ®åº“è®¾è®¡å’ŒæŸ¥è¯¢ä¼˜åŒ–  Schemaè®¾è®¡æ—¶ä¸»è¦è€ƒè™‘:æ ‡å‡†åŒ–,æ•°æ®ç±»å‹,ç´¢å¼•.  ä¸€ä¸ªæ•°æ®åº“è®¾è®¡å¯ä»¥æ··åˆä½¿ç”¨,ä¸€éƒ¨åˆ†è¡¨æ ¼æ ‡å‡†åŒ–,ä¸€éƒ¨åˆ†è¡¨æ ¼éæ ‡å‡†åŒ–.(éæ ‡å‡†åŒ–è¡¨æ ¼é€‚å½“å†—ä½™) æœ€ä¼˜çš„æ•°æ®ç±»å‹,ä½¿è¡¨åœ¨ç£ç›˜ä¸Šå æ®çš„ç©ºé—´å°½å¯èƒ½å°,è¯»å†™å¿«,å ç”¨å†…å­˜å°‘.(ç´¢å¼•ä¹Ÿå°½é‡å»ºç«‹åœ¨è¾ƒå°çš„åˆ—ä¸Š) æ­£ç¡®ç´¢å¼•,æé«˜Select,Update,Deleteæ€§èƒ½.   ä¸åŒçš„Sqlä¸åŒçš„ä¼˜åŒ–æ–¹æ¡ˆ  Explain SqlæŸ¥çœ‹ç»“æœ,åˆ†ææŸ¥è¯¢. æŸ¥è¯¢ä½¿ç”¨åŒ¹é…çš„ç±»å‹. ä½¿ç”¨long-slow-queriesè®°å½•è¾ƒæ…¢æŸ¥è¯¢,åˆ†æä¼˜åŒ–.    äºŒ.æœåŠ¡å™¨ç«¯ä¼˜åŒ–  å®‰è£…é€‚å½“çš„MySqlç‰ˆæœ¬. å¦‚æœæœåŠ¡å™¨ä½¿ç”¨Intelå¤„ç†å™¨,ä½¿ç”¨Intel C++ç‰ˆæœ¬å¯æé«˜30 %æ•ˆç‡ é…ç½®ä¼˜åŒ–. å¸¸è§ä¼˜åŒ–é¡¹:   charset max_allowed_packet max_connections table_cache_size query_cache_size  ä¸‰.å­˜å‚¨å¼•æ“ä¼˜åŒ–\n MyISAM  å¼•æ“ç‰¹ç‚¹  ä¸æ”¯æŒäº‹åŠ¡,æä¾›é«˜é€Ÿå­˜å‚¨,æ£€ç´¢ä»¥åŠå…¨æ–‡æœç´¢èƒ½åŠ›. å®•æœºä¼šç ´åè¡¨. ä½¿ç”¨çš„ç£ç›˜å’Œå†…å­˜ç©ºé—´å°. åŸºäºè¡¨çš„é”,å¹¶å‘æ›´æ–°æ•°æ®ä¼šå‡ºç°ä¸¥é‡æ€§èƒ½é—®é¢˜. MySqlåªç¼“å­˜ç´¢å¼•,æ•°æ®ç”±OSç¼“å­˜.   é€‚ç”¨æƒ…å†µ  æ—¥å¿—ç³»ç»Ÿ. åªè¯»æ“ä½œæˆ–è€…å¤§éƒ¨åˆ†è¯»æ“ä½œ. å…¨è¡¨æ‰«æ. æ‰¹é‡å¯¼å…¥æ•°æ®. æ²¡æœ‰äº‹åŠ¡çš„ä½å¹¶å‘è¯»å†™.   ä¼˜åŒ–ç­–ç•¥  NOT NULL,å¯ä»¥å‡å°‘ç£ç›˜å­˜å‚¨. Optimize Table,ç¢ç‰‡æ•´ç†,å›æ”¶ç©ºé—²ç©ºé—´. Deleting/updating/addingå¤§é‡æ•°æ®çš„æ—¶å€™ç¦æ­¢ä½¿ç”¨index. å‚æ•°ä¼˜åŒ–,key_buffer_size_variableç´¢å¼•ç¼“å­˜è®¾ç½®. é¿å…å¹¶å‘Inset Update.     InnoDB  å¼•æ“ç‰¹ç‚¹  å…·æœ‰æäº¤,å›æ»šå’Œå´©æºƒæ¢å¤èƒ½åŠ›çš„äº‹åŠ¡å®‰å…¨å­˜å‚¨å¼•æ“. å¤„ç†å·¨å¤§æ•°æ®é‡æ€§èƒ½å“è¶Š,å®ƒçš„CPUä½¿ç”¨æ•ˆç‡éå¸¸é«˜. éœ€è¦æ›´å¤šçš„å†…å­˜å’Œç£ç›˜å­˜å‚¨ç©ºé—´. æ•°æ®å’Œç´¢å¼•éƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­.   é€‚ç”¨æƒ…å†µ  éœ€è¦äº‹åŠ¡çš„åº”ç”¨. é«˜å¹¶å‘çš„åº”ç”¨. è‡ªåŠ¨æ¢å¤. è¾ƒå¿«é€Ÿçš„åŸºäºä¸»é”®çš„æ“ä½œ.   ä¼˜åŒ–ç­–ç•¥  å°½é‡ä½¿ç”¨short,integerçš„ä¸»é”®. ä½¿ç”¨prefix keys,å› ä¸ºInnoDBæ²¡æœ‰keyå‹ç¼©åŠŸèƒ½. å‚æ•°ä¼˜åŒ–,innodb_buffer_pool_size,innodb_data_home_dirç­‰ç­‰.      ä¸‰. ç¼“å­˜ä¼˜åŒ–  Memcached Redis  è½¬è‡ªï¼š http://allensuiverson.blog.163.com/blog/static/133648269201310119491437/\n","permalink":"https://blog.bitqiu.cc/posts/mysql-performance-optimization-summary/","summary":"","title":"MySQLæ€§èƒ½ä¼˜åŒ–å°ç»“"}]